{% extends 'html-partials/standart.html' %}
{% block content %}
<link href="/assets/styles/pages/mod.css" rel="stylesheet"/>

<main class="mod">
    <div class="info-text">
        <div id="title-bar">
            <h1 id="mod-name-title" translate="no">{{ data[0]['result']['name'] }} {% if data[0]['result']['public'] != 0 %}<a title="–¢–∏–ø –ø—É–±–ª–∏—á–Ω–æ—Å—Ç–∏" class="tag-link-red" translate="no">{% if data[0]['result']['public'] == 2 %}–Ω–µ–ø—É–±–ª–∏—á–µ–Ω{% endif %}{% if data[0]['result']['public'] == 1 %}–ø–æ —Å—Å—ã–ª–∫–µ{% endif %}</a>{% endif %}</h1> 
            
            {% if right_edit['edit'] %}
            <a href="/mod/{{ data[0]['result']['id'] }}/edit" id="mod-setting-gear">
                <img src="/assets/images/svg/white/gear.svg" alt="–ü–µ—Ä–µ–π—Ç–∏ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏">
            </a>
            {% endif %}
        </div>

        <div id="mod-tags-title">
            <a id="mod-for-game-label" title="–ú–æ–¥ –¥–ª—è —ç—Ç–æ–π –∏–≥—Ä—ã" href="/?game={{ data[0]['result']['game']['id'] }}&game_select=false" class="tag-link-green" translate="no">üéÆ{{ data[0]['result']['game']['name'] }}</a>
            <a title="–†–∞–∑–º–µ—Ä –º–æ–¥–∞" class="tag-link-blue" translate="no">üì¶{{ data[0]['result']['size'] }}</a>
            <a title="–ö–æ–ª-–≤–æ –∑–∞–≥—Ä—É–∑–æ–∫" class="tag-link-orange" translate="no">üì•{{ data[0]['result']['downloads'] }}</a>

            {% if data[0]['result']['date_update_file_js'] != data[0]['result']['date_creation_js'] %}
            <a title="–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ" id="date_update_a_tag" datejs="{{ data[0]['result']['date_update_file_js'] }}" class="tag-link" translate="no">‚è≥{{ data[0]['result']['date_update_file'] }}</a>
            {% endif %}

            <a title="–î–∞—Ç–∞ –ø–æ—è–≤–ª–µ–Ω–∏—è" id="date_creation_a_tag" datejs="{{ data[0]['result']['date_creation_js'] }}" class="tag-link" translate="no">üìù{{ data[0]['result']['date_creation'] }}</a>
        </div>

        <article id="mod-description">
        {{ data[0]['result']['description'] }}
        </article>
        <script src="/assets/scripts/mod.js"></script>
    </div>

    <div class="right-bar">
        {% if data[1]['results']|length >0 %}
        <div class="slider{% if data[0]['no_many_screenshots'] %} one_slider{% endif %}">
            <ul class="js__slider__images slider__images">
            {% for item in data[1]['results'] %}
                <a href="{{ item['url'] }}" class="slider__images-item without-caption image-link">
                <img src="{{ item['url'] }}" alt="–°–∫—Ä–∏–Ω—à–æ—Ç –º–æ–¥–∞" class="slider__images-image" onerror="this.src='/assets/images/image-not-found.webp'" />  
                </a>
            {% endfor %}
            </ul>
        
            {% if data[0]["no_many_screenshots"] == false %}
            <div class="slider__controls">
            <ol class="js__slider__pagers slider__pagers"></ol>
            </div>
            {% endif %}
        </div>
        <script src='//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js'></script>
        <script src="/assets/scripts/images-list.js"></script>
        {% endif %}


        {% if data[2] | length > 0 %}
        <div class="outline-container">
        {% for item in data[2] %}
            <a class="tag-link dop-tag-link" id="{{ item.id }}" title="–¢–µ–≥ –º–æ–¥–∞: {{ item.name }}"><h3 translate="no">{{ item.name }}</h3></a>
        {% endfor %}
        </div>
        {% endif %}


        {% if authors | length > 0 %}
        <div class="outline-container">
        <h2>–ê–≤—Ç–æ—Ä—ã</h2>
        {% for item in authors %}
            <a class="element user-author" {% if item.owner %}title="–°–æ–∑–¥–∞—Ç–µ–ª—å –º–æ–¥–∞" style="background: #200202;"{% endif %} href="/user/{{ item.id }}">
                <img src="https://new.openworkshop.su/api/manager/profile/avatar/{{ item.id }}" alt="–ê–≤–∞—Ç–∞—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è" onerror="this.src='/assets/images/image-not-found.webp'">
                <p translate="no">{{ item.username }} {% if item.grade|length >0 %}<grade title="–ó–≤–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–∑–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–µ –∑–∞—Å–ª—É–≥–∏)" style="padding-top: 0; padding-bottom: 0;" class="tag-link-red" translate="no">{{ item.grade }}</grade>{% endif %}</p>
            </a>
        {% endfor %}
        </div>
        {% endif %}

        {% if data[0]['dependencies_count'] > 0 %}
        <div class="outline-container">
        <h2>–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –º–æ–¥–∞</h2>
        {% for item in data[3].values() %}
            <a class="element" href="/mod/{{ item.id }}">
                <img src="{{ item.img }}" alt="–õ–æ–≥–æ—Ç–∏–ø –º–æ–¥–∞" onerror="this.src='/assets/images/image-not-found.webp'">
                <h3 translate="no">{{ item.name }}</h3>
            </a>
        {% endfor %}
        </div>
        {% endif %}
        
        {% if not user_profile %}
        <div class="outline-container">
            <h3>–ê–≤—Ç–æ—Ä–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è —Ä–µ–∫–ª–∞–º–∞</h3>
            <script src="//s.contemio.ru/c.js"></script><div id="cresults"><script async defer>ctext.load(22981, "contemio.ru");</script></div>
        </div>
        {% endif %}

        {% if data[0]['result']['public'] != 2 %}
        <a class="download-button" href="https://new.openworkshop.su/api/manager/download/{{ data[0]['result']['id'] }}">–ó–∞–≥—Ä—É–∑–∏—Ç—å</a>
        {% endif %}
    </div>
</main>
{% endblock %}

{% block title %}
{{ data[0]['result']['name'] }} - Open Work –¥–ª—è {{ data[0]['result']['game']['name'] }}
{% endblock %}

{% block description %}
{{ data[0]['result']['short_description'] }}
{% endblock %}


{% block metaimage %}
{{ is_mod_data["logo"] }}
{% endblock %}

{% block published_time %}
{{ is_mod_data["date_creation"] }}
{% endblock %}

{% block modified_time %}
{{ is_mod_data["date_update_file"] }}
{% endblock %}