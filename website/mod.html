{% extends 'html-partials/standart.html' %}
{% block content %}
    <div style="margin: 2pt;">
        <article class="mod-container">
            <div class="mod-big-cont">
              <div style="display: flex; justify-content: space-between;">
                <h1 id="mod-name-title" translate="no">{{ data[0]['result']['name'] }} {% if data[0]['result']['public'] != 0 %}<a title="–¢–∏–ø –ø—É–±–ª–∏—á–Ω–æ—Å—Ç–∏" class="tag-link-red" translate="no">{% if data[0]['result']['public'] == 2 %}–ù–ï–ü–£–ë–õ–ò–ß–ù–´–ô{% endif %}{% if data[0]['result']['public'] == 1 %}–¢–û–õ–¨–ö–û –ü–û –°–°–´–õ–ö–ï{% endif %}</a>{% endif %}</h1> 
              
                {% if right_edit['edit'] %}
                <a href="/mod/{{ data[0]['result']['id'] }}/edit" style="margin-right: 3pt;" class="user-setting-gear">
                  <img src="/assets/images/settings.svg" alt="–ü–µ—Ä–µ–π—Ç–∏ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏">
                </a>
                {% endif %}
              </div>
              <h4 id="mod-tags-title">
                  <a id="mod-for-game-label" title="–ú–æ–¥ –¥–ª—è —ç—Ç–æ–π –∏–≥—Ä—ã" href="/?game={{ data[0]['result']['game']['id'] }}&game_select=false" class="tag-link-green" translate="no">üéÆ{{ data[0]['result']['game']['name'] }}</a>
                  <a title="–†–∞–∑–º–µ—Ä –º–æ–¥–∞" class="tag-link-blue" translate="no">üì¶{{ data[0]['result']['size'] }}</a>
                  <a title="–ö–æ–ª-–≤–æ –∑–∞–≥—Ä—É–∑–æ–∫" class="tag-link-orange" translate="no">üì•{{ data[0]['result']['downloads'] }}</a>

                  {% if data[0]['result']['date_update_js'] != data[0]['result']['date_creation_js'] %}
                  <a title="–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ" id="date_update_a_tag" datejs="{{ data[0]['result']['date_update_js'] }}" class="tag-link" translate="no">‚è≥{{ data[0]['result']['date_update'] }}</a>
                  {% endif %}

                  <a title="–î–∞—Ç–∞ –ø–æ—è–≤–ª–µ–Ω–∏—è" id="date_creation_a_tag" datejs="{{ data[0]['result']['date_creation_js'] }}" class="tag-link" translate="no">üìù{{ data[0]['result']['date_creation'] }}</a>
              </h4>
              
              <article id="mod-description">
                {{ data[0]['result']['description'] }}
              </article>
              <script src="/assets/scripts/mod.js"></script>
              <script src='https://cdnjs.cloudflare.com/ajax/libs/prism/1.23.0/prism.min.js'></script><script  src="./script.js"></script>
            </div>

            <div class="right-bar-mod">
              {% if data[1]['results']|length >0 %}
              <div class="wrapper" style="width: 100%;">
                <div class="slider{% if data[0]['no_many_screenshots'] %} one_slider{% endif %}">
                  <ul class="js__slider__images slider__images">
                    {% for item in data[1]['results'] %}
                      <a href="{{ item['url'] }}" style="min-width: 100%;" class="slider__images-item without-caption image-link">
                        <img src="{{ item['url'] }}" alt="–°–∫—Ä–∏–Ω—à–æ—Ç –º–æ–¥–∞" style="min-width: 100%;" class="slider__images-image" onerror="this.src='/assets/images/image-not-found.webp'" />  
                      </a>
                    {% endfor %}
                  </ul>
              
                  {% if data[0]["no_many_screenshots"] == false %}
                  <div class="slider__controls">
                    <ol class="js__slider__pagers slider__pagers"></ol>
                  </div>
                  {% endif %}
                </div>
              </div>
              <script src='//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js'></script>
              <script src="/assets/scripts/images-list.js"></script>
              {% endif %}


              {% if data[2] | length > 0 %}
              <div class="mod-dependence-list" style="display: flex; flex-wrap: wrap; align-content: center;">
                <style>
                  .dop-tag-link {
                    cursor: auto;
                    margin: 1pt;
                    height: 20pt;
                  }
                  .dop-tag-link > h3 {
                    font-size: 12pt;
                  }
                </style>
                {% for item in data[2] %}
                  <a class="tag-link dop-tag-link" id="{{ item.id }}" title="–¢–µ–≥ –º–æ–¥–∞: {{ item.name }}" href="/mod/{{ item.id }}"><h3 translate="no">{{ item.name }}</h3></a>
                {% endfor %}
              </div>
              {% endif %}


              {% if authors | length > 0 %}
              <div class="mod-dependence-list">
                <style>
                  .user-author > p {
                    font-size: 20pt;
                    color: white;
                  }
                  .user-author > p > grade {
                    font-size: 15pt;
                    height: 22pt;
                  }
                  .user-author > img {
                    width: 30pt;
                  }
                </style>

                <h2>–ê–≤—Ç–æ—Ä—ã</h2>
                {% for item in authors %}
                  <a class="mod-dependence user-author" {% if item.owner_mod %}title="–°–æ–∑–¥–∞—Ç–µ–ª—å –º–æ–¥–∞" style="background: #200202;"{% endif %} href="/user/{{ item.id }}">
                    <img src="{{ item.avatar_url }}" alt="–õ–æ–≥–æ—Ç–∏–ø –º–æ–¥–∞" onerror="this.src='/assets/images/image-not-found.webp'">
                    <p translate="no">{{ item.username }} {% if item.grade|length >0 %}<grade title="–ó–≤–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–∑–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–µ –∑–∞—Å–ª—É–≥–∏)" style="padding-top: 0; padding-bottom: 0;" class="tag-link-red" translate="no">{{ item.grade }}</grade>{% endif %}</p>
                  </a>
                {% endfor %}
              </div>
              {% endif %}

              {% if data[0]['dependencies_count'] > 0 %}
              <div class="mod-dependence-list">
                <h2>–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –º–æ–¥–∞</h2>
                {% for item in data[3].values() %}
                  <a class="mod-dependence" href="/mod/{{ item.id }}">
                    <img src="{{ item.img }}" alt="–õ–æ–≥–æ—Ç–∏–ø –º–æ–¥–∞" onerror="this.src='/assets/images/image-not-found.webp'">
                    <h3 translate="no">{{ item.name }}</h3>
                  </a>
                {% endfor %}
              </div>
              {% endif %}
              
              {% if not user_profile %}
              <div style="margin-top: 2pt; background: #0000004d; padding: 3pt; border-radius: 5pt;">
                <h3 style="text-align: center;">–ê–≤—Ç–æ—Ä–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è —Ä–µ–∫–ª–∞–º–∞</h3>
                <script src="//s.contemio.ru/c.js"></script><div id="cresults"><script async defer>ctext.load(22981, "contemio.ru");</script></div>
              </div>
              {% endif %}

              {% if data[0]['result']['public'] != 2 %}
              <a class="download-button" href="https://api.openworkshop.su/download/{{ data[0]['result']['id'] }}">–ó–∞–≥—Ä—É–∑–∏—Ç—å</a>
              {% endif %}
            </div>
        </article>
    </div>

{% endblock %}

{% block title %}
{{ data[0]['result']['name'] }} - Open Work –¥–ª—è {{ data[0]['result']['game']['name'] }}
{% endblock %}

{% block description %}
{{ data[0]['result']['short_description'] }}
{% endblock %}


{% block metaimage %}
{{ is_mod_data["logo"] }}
{% endblock %}

{% block published_time %}
{{ is_mod_data["date_creation"] }}
{% endblock %}

{% block modified_time %}
{{ is_mod_data["date_update"] }}
{% endblock %}
