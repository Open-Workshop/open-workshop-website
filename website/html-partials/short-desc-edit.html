<div style="height: 200px; width: 100%; position: relative; margin-top: -3pt; margin-left: -3pt; margin-bottom: 8pt;" id="short-desc-edit">
    <textarea placeholder="Короткое описание не может быть пустым!(" id="editing-short" spellcheck="false" oninput="full_short_update()" onscroll="short_sync_scroll(this);" startdata="{{ init_text | default('') }}">{{ init_text | default('') }}</textarea>
    <pre id="highlighting-short" aria-hidden="true">
        <code class="language-ow" id="highlighting-content-short">
        </code>
      
        <h3 title="Ограничение в 256 символов описания!" id="limit-desc-text-short"></h3>
        <script>
            $(document).ready(function() {
                full_short_update()
            })


            function limitShortRenderUpdate() {
                const remainingChars = 256 - $('#editing-short').val().length;
                $('#limit-desc-text-short').text(remainingChars);

                if (remainingChars < 0) {
                    $('#limit-desc-text-short').css('color', 'red');
                } else {
                    $('#limit-desc-text-short').css('color', 'white');
                }
            }
            
            const textareaShortDesc = document.getElementById("editing-short")
            function full_short_update() {
                short_update(textareaShortDesc.value)
                short_sync_scroll(textareaShortDesc)
                short_on_height(textareaShortDesc)
                limitShortRenderUpdate()
            }

            function short_on_height(element) {
                element.style.height = 0;
                heightCurr = (element.scrollHeight+20) + "px";
                
                element.style.height = heightCurr;
                document.getElementById("highlighting-short").style.height = heightCurr;
                document.getElementById("short-desc-edit").style.height = heightCurr;
            }

            function short_update(text) {
                let result_element = document.querySelector("#highlighting-content-short");
                // Handle final newlines (see article)
                if(text[text.length-1] == "\n") {
                    text += " ";
                }
                // Update code
                result_element.innerHTML = text.replace(new RegExp("&", "g"), "&amp;").replace(new RegExp("<", "g"), "&lt;"); /* Global RegExp */
                // Syntax Highlight
                Prism.highlightElement(result_element);
            }

            function short_sync_scroll(element) {
                /* Scroll result to scroll coords of event - sync with textarea */
                let result_element = document.querySelector("#highlighting-short");
                // Get and set x and y
                result_element.scrollTop = element.scrollTop;
                result_element.scrollLeft = element.scrollLeft;
                $("h3#limit-desc-text-short").css("right", (-element.scrollLeft+5)+"px"); console.log(element.scrollLeft)
            }
        </script>
    </pre>
</div>