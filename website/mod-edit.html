{% extends 'html-partials/standart.html' %}
{% block content %}
    <div style="margin: 2pt;">
      <article class="mod-container" style="width: 210pt; justify-content: center;">
        <style>
          button.pager {
            height: 30pt;
            width: 75pt;
            border-radius: 5pt;
          }
        </style>
        <button onclick="$('.pone').hide(); $('.ptwo').show();" class="pager">–û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ</button>
        <button onclick="$('.pone').show(); $('.ptwo').hide();" class="pager">–û—Å–Ω–æ–≤–Ω–æ–µ</button>
        <button style="background-color: yellow;" class="pager">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
      </article>

      <article class="mod-container pone" style="display: none;">
        <style>
          div.mini-cont {
            background: #0000006b; 
            padding: 5pt; 
            border-radius: 5pt;
            margin: 2pt;
          }
        </style>

        <div class="mini-cont">
          <h2 style="text-align: center;">–ó–∞–≥—Ä—É–∑–∏—Ç—å –Ω–æ–≤—É—é –≤–µ—Ä—Å–∏—é</h2>
          <input style="background: blueviolet; border-radius: 10pt; color: azure;" type="file" accept=".zip" id="input-mod-file-update">
          <button style="height: 41px; width: 90px; border-radius: 10pt; margin-top: 2pt;" onclick="uploadUpdateMod()">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
          <section progressuploadmod style="display: none;">
            <div class="progressbarWrapper">
              <span id="greenBar"></span>
            </div>
          </section>
          <style>
            .progressbarWrapper {
              height: 30px;
              display: block;
              margin-top: 3pt;
              position: relative;
              background: #555;
              padding: 3px;
              box-shadow: inset 0 -1px 1px rgba(255, 255, 255, 0.3);
              border-radius: 5pt;
            }

            #greenBar {
              display: block;
              height: 100%;
              width: 0px;
              background-color: rgb(43, 194, 83);
              background-image: linear-gradient(
                center bottom,
                rgb(43, 194, 83) 37%,
                rgb(84, 240, 84) 69%
              );
              position: relative;
              overflow: hidden;
              font-size: 15px;
              text-align: center;
              color: white;
              transition: all 700ms ease;
              border-radius: 5pt;
            }
          </style>
          <script>
            function uploadUpdateMod() {
              let elem = document.getElementById("greenBar");
              var fileInput = document.getElementById('input-mod-file-update');

              $('section[progressuploadmod]').show()

              var file = fileInput.files[0];
              var formData = new FormData();
              formData.append('mod_file', file);

              var xhr = new XMLHttpRequest();

              xhr.upload.addEventListener('progress', function(event) {
                if (event.lengthComputable) {
                  var percentComplete = (event.loaded / event.total) * 100;
                  
                  elem.style.width = percentComplete + "%";
                  elem.innerHTML = percentComplete + "%";
                }
              });

              xhr.onload = function() {
                if (xhr.status != 200) { // –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–∫–∏
                  // –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–∫–∏
                  banner_error_a = {
                    title: '–û—à–∏–±–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è ('+xhr.status+')',
                    text: xhr.responseText,//.substring(1, text.length - 1),
                    theme: 'warning',
                    autohide: true,
                    interval: 6000
                  };

                  new Toast(banner_error_a);
                } else {
                  // –æ–±—Ä–∞–±–æ—Ç–∫–∞ —É—Å–ø–µ—à–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞
                  banner_error_a = {
                    title: '–£—Å–ø–µ—à–Ω–æ!',
                    text: '–ù–æ–≤–∞—è –≤–µ—Ä—Å–∏—è –º–æ–¥–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä!',//.substring(1, text.length - 1),
                    theme: 'success',
                    autohide: true,
                    interval: 6000
                  };

                  new Toast(banner_error_a);
                }
              };

              xhr.onerror = function() {
                // –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–∫–∏
                banner_error_a = {
                  title: '–°–µ—Ç–µ–≤–∞—è –æ—à–∏–±–∫–∞',
                  text: xhr.responseText,//.substring(1, text.length - 1),
                  theme: 'danger',
                  autohide: true,
                  interval: 6000
                };

                new Toast(banner_error_a);
              };

              xhr.open('POST', "https://openworkshop.su/api/accounts/edit/mod?mod_id={{ data[0]['result']['id'] }}", true);
              xhr.send(formData)
            }
          </script>
        </div>

        <div class="mini-cont" style="display: flex; flex-direction: column; width: 220pt;">
          <h2 style="text-align: center;">–£–¥–∞–ª–∏—Ç—å –º–æ–¥</h2>
          <input type="text" style="border-radius: 10pt; background: brown;" placeholder="–ü–æ—Å–ª–µ–¥–Ω–µ–µ —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –º–æ–¥–∞..." title="–ü–æ—Å–ª–µ–¥–Ω–µ–µ —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –º–æ–¥–∞">
          <button class="pager" style="background-color: red; margin-top: 3pt; color: white;">–£–¥–∞–ª–∏—Ç—å</button>
        </div>
      </article>

      <article class="mod-container ptwo">
          <div class="mod-big-cont">
            <input class="edit-username" style="max-width: 99%; min-width: 270px;" placeholder="–≠—Ç–æ—Ç –º–æ–¥ –ø—Ä–æ–∑–≤–∞–ª–∏..." maxlength="60" startdata="{{ data[0]['result']['name'] }}" id="mod-name-title" value="{{ data[0]['result']['name'] }}" name="mod-name-title" oninput="titleEditEvent()">
            
            <h4 id="mod-tags-title">
              <a id="mod-for-game-label" title="–ú–æ–¥ –¥–ª—è —ç—Ç–æ–π –∏–≥—Ä—ã" href="/?game={{ data[0]['result']['game']['id'] }}&game_select=false" class="tag-link-green" translate="no">üìù{{ data[0]['result']['game']['name'] }}</a>
            </h4>
            
            <div>
              <div style="margin-left: 6pt; margin-top: 4pt;">
                <button class="descbutton" onclick="toHideShow('mod-description-preview', 'main-desc-edit')">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ</button>
                <button class="descbutton" onclick="toHideShow('main-desc-edit', 'mod-description-preview')">–ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä</button>
                <style>
                  button.descbutton {
                    padding: 4pt;
                    font-size: 13pt;
                    border-radius: 5pt;
                    background: beige;
                  }
                </style>
              </div>
              <div>
                <div style="height: 200px; position: relative; margin-top: -3pt; margin-left: -3pt;" id="main-desc-edit">
                  <textarea placeholder="–≠—Ç–æ—Ç –º–æ–¥ —Å–æ—Ç–≤–æ—Ä—è–µ—Ç –Ω–µ–≤–µ—Ä–æ—è—Ç–Ω—ã–µ –≤–µ—â–∏..." id="editing" spellcheck="false" oninput="update(this.value); sync_scroll(this); on_height(this)" onscroll="sync_scroll(this);" onkeydown="check_tab(this, event);">
                    {{ data[0]['result']['description'] }}
                  </textarea>
                  <pre id="highlighting" aria-hidden="true">
                    <code class="language-ow" id="highlighting-content">
                    </code>
                  </pre>
                </div>

                <link rel="stylesheet" href="/assets/styles/vendors/ow-language.css">
                
                <script src='https://cdnjs.cloudflare.com/ajax/libs/prism/1.23.0/prism.min.js'></script>
                <script>
                  const textareaDesc = document.getElementById("editing")
                  $(document).ready(function() {
                    update(textareaDesc.value)
                    sync_scroll(textareaDesc)
                    on_height(textareaDesc)
                  })

                  function on_height(element) {
                    element.style.height = 0;
                    heightCurr = (element.scrollHeight+20) + "px";
                    
                    element.style.height = heightCurr;
                    document.getElementById("highlighting").style.height = heightCurr;
                    document.getElementById("main-desc-edit").style.height = heightCurr;
                  }


                  b={
                    pattern: /\[b\](.*?)\[\/b\]/gms,
                    inside: {
                      'punctuation': /\[\/?b\]/ig,
                      'italic': /\[i\](.*?)\[\/i\]/gms,
                      'content': /.*/ig,
                    }
                  }
                  i={
                    pattern: /\[i\](.*?)\[\/i\]/gms,
                    inside: {
                      'punctuation': /\[\/?i\]/ig,
                      'bold': /\[b\](.*?)\[\/b\]/gms,
                      'content': /.*/ig,
                    }
                  }
                  img={
                    pattern: /\[img\](.*?)\[\/img\]/ig,
                    inside: {
                      'punctuation': /\[\/?img|\]/ig,
                      'content': /.*/ig,
                    }
                  }
                  url={
                    pattern: /(?:\[url=)(https?:\/\/.*?)(?:\])(.*?)(?:\[\/url\])/ig,
                    inside: {
                      'img': img,
                      'punctuation': /\[\/?url=?|\]/ig,
                      'link': /https?:\/\/\S+/ig,
                      'bold': b,
                      'italic': i,
                      'content': /.*/ig,
                    }
                  }
                  htitle={
                    pattern: /\[(h[1-6])\](.*?)\[\/\1\]/gs,
                    inside: {
                      'url': url,
                      'img': img,
                      'punctuation': /\[\/?(h[1-6])\]/ig,
                      'bold': b,
                      'italic': i,
                      'content': /.*/ig,
                    }
                  }

                  // https://www.json.org/json-en.html
                  Prism.languages.ow = {
                    'list': {
                      pattern: /\[list\]((?:.|\n)*?)\[\/list\]/gmi,
                      inside: {
                        "list": /\[\/?list\]/ig,
                        "point": /\[\*\]/ig,
                        'title': htitle,
                        'img': img,
                        'url': url,
                        'link': /https?:\/\/\S+/ig,
                        'bold': b,
                        'italic': i,
                        'content': /.*/ig,
                      }
                    },
                    'url': url,
                    'img': img,
                    'title': htitle,
                    'link': /https?:\/\/\S+/ig,
                    'italic': i,
                    'bold': b,
                  };

                  Prism.languages.webmanifest = Prism.languages.ow;

                  function update(text) {
                    let result_element = document.querySelector("#highlighting-content");
                    // Handle final newlines (see article)
                    if(text[text.length-1] == "\n") {
                      text += " ";
                    }
                    // Update code
                    result_element.innerHTML = text.replace(new RegExp("&", "g"), "&amp;").replace(new RegExp("<", "g"), "&lt;"); /* Global RegExp */
                    // Syntax Highlight
                    Prism.highlightElement(result_element);
                  }

                  function sync_scroll(element) {
                    /* Scroll result to scroll coords of event - sync with textarea */
                    let result_element = document.querySelector("#highlighting");
                    // Get and set x and y
                    result_element.scrollTop = element.scrollTop;
                    result_element.scrollLeft = element.scrollLeft;
                  }

                  function check_tab(element, event) {
                    let code = element.value;
                    if(event.key == "Tab") {
                      /* Tab key pressed */
                      event.preventDefault(); // stop normal
                      let before_tab = code.slice(0, element.selectionStart); // text before tab
                      let after_tab = code.slice(element.selectionEnd, element.value.length); // text after tab
                      let cursor_pos = element.selectionStart + 1; // where cursor moves after tab - moving forward by 1 char to after tab
                      element.value = before_tab + "\t" + after_tab; // add tab char
                      // move cursor
                      element.selectionStart = cursor_pos;
                      element.selectionEnd = cursor_pos;
                      update(element.value); // Update text to include indent
                    }
                  }
                </script>
                
                <article id="mod-description-preview" style="display: none;">{{ data[0]['result']['description'] }}</article>

                <script>
                  function toHideShow(one, two) {
                    document.getElementById(one).style.display = "none"
                    document.getElementById(two).style.display = null;

                    document.getElementById('mod-description-preview').innerHTML = OpenWS.syntaxToHTML(document.getElementById('editing').value);
                  }
                </script>
              </div>
            </div>

            <script>
              $(document).ready(function() {
                var container = document.getElementById('mod-description-preview');
                container.innerHTML = OpenWS.syntaxToHTML(container.innerHTML);
              })
            </script>

            <script>
              const usernameElement = document.getElementById('mod-name-title');

              titleEditEvent()
              function titleEditEvent() {
                if (usernameElement) {
                  const myText = usernameElement.value;

                  if (myText.length > 60 || myText.length <= 0) {
                    usernameElement.classList.add('limit');
                  } else {
                    usernameElement.classList.remove('limit')
                  }

                  usernameElement.style.width = 0;
                  usernameElement.style.width = usernameElement.scrollWidth+5 + "px";
                }
              }
            </script>
          </div>

          <div class="right-bar-mod">
            <div class="wrapper" style="width: 100%;">
              <div class="slider">
                <style>
                  div.bottom-editor-screenshot {
                    background: #030021;
                    border-bottom-right-radius: 5pt;
                    border-bottom-left-radius: 5pt;
                    display: flex;
                    justify-content: space-between;
                  }
                  div.bottom-editor-screenshot > button {
                    border-radius: 5pt;
                    padding: 3pt;
                  }
                  div.bottom-editor-screenshot > select {
                    margin: 0;
                    margin-bottom: 2pt;
                    border-radius: 0;
                    border: none;
                    border-bottom-left-radius: 3pt;
                    border-bottom-right-radius: 3pt;
                  }
                </style>
                <ul class="js__slider__images slider__images">
                  {% for item in data[1]['results'] %}
                    <div resid="{{ item['id'] }}">
                      <a startdata="{{ item['url'] }}" href="{{ item['url'] }}" class="slider__images-item without-caption image-link">
                        <img src="{{ item['url'] }}" alt="–°–∫—Ä–∏–Ω—à–æ—Ç –º–æ–¥–∞" class="slider__images-image" onerror="this.src='/assets/images/image-not-found.webp'" />
                      </a>
                      <div class="bottom-editor-screenshot">
                        <select selectortypeshot onchange="resetLogo(this)" startdata="{{ item['type'] }}" title="–í—ã–±–µ—Ä–µ—Ç–µ —Ç–∏–ø">
                          <option value="screenshot" {% if item['type'] == "screenshot" %}selected{% endif %}>–°–∫—Ä–∏–Ω—à–æ—Ç</option>
                          <option value="logo" title="–ú–æ–∂–µ—Ç –±—ã—Ç—å —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω" {% if item['type'] == "logo" %}selected{% endif %}>–õ–æ–≥–æ—Ç–∏–ø</option>
                        </select>
                        <button onclick="deleteLogo(this)">–£–¥–∞–ª–∏—Ç—å</button>
                      </div>
                      <input onchange="inputLogoChange(this)" id="input-logo-url" style="width: 100%; margin-bottom: -20pt; border-radius: 3pt; background: darkgrey;" type="url" value="{{ item['url'] }}"  placeholder="–°—Å—ã–ª–∫–∞ –Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ">
                    </div>
                  {% endfor %}
                </ul>

                <h1 noscreensshots style="width: 100%; text-align: center; margin-bottom: -30pt;">–°–∫—Ä–∏–Ω—à–æ—Ç–æ–≤ –Ω–µ—Ç</h1>
            
                <div class="slider__controls">
                  <ol class="js__slider__pagers slider__pagers"></ol>
                </div>
                
                <script>
                  function inputLogoChange(inp) {
                    console.log(inp.value)

                    var $parentDiv = $(inp).closest('div'); // –ù–∞—Ö–æ–¥–∏–º –±–ª–∏–∂–∞–π—à–∏–π —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π —ç–ª–µ–º–µ–Ω—Ç div
                    var $aElement = $parentDiv.find('a'); // –ù–∞—Ö–æ–¥–∏–º a —ç–ª–µ–º–µ–Ω—Ç –≤–Ω—É—Ç—Ä–∏ div
                    var $imgElement = $parentDiv.find('img'); // –ù–∞—Ö–æ–¥–∏–º img —ç–ª–µ–º–µ–Ω—Ç –≤–Ω—É—Ç—Ä–∏ div
                    console.log($aElement, $imgElement); // –õ–æ–≥–∏—Ä—É–µ–º –Ω–∞–π–¥–µ–Ω–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã

                    $aElement.attr('href', inp.value); // —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ —Å—Å—ã–ª–∫–∏ –≤ a —ç–ª–µ–º–µ–Ω—Ç
                    $imgElement.attr('src', inp.value); // —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ src –≤ img —ç–ª–µ–º–µ–Ω—Ç
                  }

                  // create pager list items
                  var sliderImage = document.querySelectorAll('.slider__images-image');
                  var sliderPagers = document.querySelectorAll('.js__slider__pagers');


                  // set up vars
                  var sliderPagersList = document.querySelectorAll('ol.js__slider__pagers li');
                  var sliderImages = document.querySelector('.js__slider__images');
                  var sliderImagesItems = document.querySelectorAll('.slider__images-item');
                  var lastElem = sliderPagersList.length - 1;
                  var sliderTarget;

                  
                  function deleteLogo(butt) {
                    $(butt).closest('div[resid]').remove();
                    
                    screenshotsUpdate();
                  }
                  function addLogo() {
                    const inputUrl = document.querySelector('input[newshoturl]')
                    const selectType = document.querySelector('select[newshottype]')

                    console.log(inputUrl.value, selectType.value)


                    // –°–æ–∑–¥–∞–µ–º —ç–ª–µ–º–µ–Ω—Ç div
                    var $div = $('<div>').attr('resid', 'new');

                    // –°–æ–∑–¥–∞–µ–º —ç–ª–µ–º–µ–Ω—Ç a
                    var $a = $('<a>').attr('startdata', inputUrl.value).attr('href', inputUrl.value).addClass('slider__images-item without-caption image-link');

                    // –°–æ–∑–¥–∞–µ–º —ç–ª–µ–º–µ–Ω—Ç img
                    var $img = $('<img>').attr('src', inputUrl.value).attr('alt', '–°–∫—Ä–∏–Ω—à–æ—Ç –º–æ–¥–∞').addClass('slider__images-image loaded').attr('onerror', 'this.src=\'/assets/images/image-not-found.webp\'');

                    // –î–æ–±–∞–≤–ª—è–µ–º img –≤ a
                    $a.append($img);

                    // –î–æ–±–∞–≤–ª—è–µ–º a –≤ div
                    $div.append($a);

                    // –°–æ–∑–¥–∞–µ–º —ç–ª–µ–º–µ–Ω—Ç select
                    var $select = $('<select>').attr('startdata', selectType.value).attr('title', '–í—ã–±–µ—Ä–µ—Ç–µ —Ç–∏–ø').attr('onchange', 'resetLogo(this)').attr('selectortypeshot', '');

                    // –°–æ–∑–¥–∞–µ–º option –¥–ª—è select
                    var $option1 = $('<option>').attr('value', 'screenshot').text('–°–∫—Ä–∏–Ω—à–æ—Ç');
                    if (selectType.value === 'screenshot') {
                      $option1.attr('selected', 'selected');
                    }
                    var $option2 = $('<option>').attr('value', 'logo').attr('title', '–ú–æ–∂–µ—Ç –±—ã—Ç—å —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω').text('–õ–æ–≥–æ—Ç–∏–ø');
                    if (selectType.value === 'logo') {
                      $option2.attr('selected', 'selected');
                      resetLogo(selectType)
                    }

                    // –î–æ–±–∞–≤–ª—è–µ–º option –≤ select
                    $select.append($option1, $option2);

                    // –°–æ–∑–¥–∞–µ–º –∫–Ω–æ–ø–∫—É
                    var $button = $('<button>').attr('onclick', 'deleteLogo(this)').text('–£–¥–∞–ª–∏—Ç—å');

                    // –î–æ–±–∞–≤–ª—è–µ–º select –∏ –∫–Ω–æ–ø–∫—É –≤ div
                    var $divT = $('<div>').addClass('bottom-editor-screenshot');
                    $divT.append($select, $button);
                    $div.append($divT)

                    // –°–æ–∑–¥–∞–µ–º input
                    var $input = $('<input>').attr('onchange', 'inputLogoChange(this)').attr('id', 'input-logo-url').attr('style', 'width: 100%; margin-bottom: -20pt; border-radius: 3pt; background: darkgrey;').attr('type', 'url').attr('value', inputUrl.value).attr('placeholder', '–°—Å—ã–ª–∫–∞ –Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ');

                    // –î–æ–±–∞–≤–ª—è–µ–º input –≤ div
                    $div.append($input);

                    // –î–æ–±–∞–≤–ª—è–µ–º div –≤ DOM
                    $('.slider__images').append($div);

                    $('.without-caption').magnificPopup({
                      type: 'image',
                      closeOnContentClick: true,
                      closeBtnInside: false,
                      mainClass: 'mfp-no-margins mfp-with-zoom', // class to remove default margin from left and right side
                      image: {
                        verticalFit: true
                      },
                      zoom: {
                        enabled: true,
                        duration: 300 // don't foget to change the duration also in CSS
                      }
                    });

                    screenshotsUpdate()
                  }

                  function resetLogo(noReset) {
                    if (noReset.value == "logo") {
                      $('select[selectortypeshot]').not(noReset).val('screenshot');

                      banner_error_a = {
                        title: '–õ–æ–≥–æ—Ç–∏–ø –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—ë–Ω',
                        text: '–õ–æ–≥–æ—Ç–∏–ø –º–æ–∂–µ—Ç –±—ã—Ç—å —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω. –ü—Ä–æ—à–ª—ã–π –ª–æ–≥–æ—Ç–∏–ø —Å—Ç–∞–ª —Å–∫—Ä–∏–Ω—à–æ—Ç–æ–º.',
                        theme: 'info',
                        autohide: true,
                        interval: 6000
                      };

                      new Toast(banner_error_a);
                    }
                  }

                  screenshotsUpdate()
                  function screenshotsUpdate() {
                    $('.js__slider__pagers.slider__pagers').empty();

                    sliderImage = document.querySelectorAll('.slider__images-image');
                    sliderPagers = document.querySelectorAll('.js__slider__pagers');

                    sliderImage.forEach(function (image, index) {
                      listItem = document.createElement('li');
                      listItem.textContent = index + 1;
                      sliderPagers[0].appendChild(listItem);
                    });

                    // set up vars
                    sliderPagersList = document.querySelectorAll('ol.js__slider__pagers li');
                    sliderImages = document.querySelector('.js__slider__images');
                    sliderImagesItems = document.querySelectorAll('.slider__images-item');
                    lastElem = sliderPagersList.length - 1;

                    // pager controls
                    sliderPagersList.forEach(function (pager) {
                      pager.addEventListener('click', function () {
                        if (!pager.classList.contains('active')) {
                          sliderTarget = Array.from(sliderPagersList).indexOf(pager);
                          sliderResponse(sliderTarget);
                        }
                      });
                    });

                    if (sliderPagersList.length <= 0) {
                      $('h1[noscreensshots]').show();
                    } else {
                      $('h1[noscreensshots]').hide();
                    }

                    sliderResponse(0)
                  }

                  // set up first slide
                  sliderPagersList[0].classList.add('active');
                  sliderImagesItems.forEach(function (item, index) {
                    if (index !== 0) {
                      item.parentNode.style.display = 'none';
                    }
                  });

                  // transition function
                  function sliderResponse(sliderTarget) {
                    sliderImagesItems.forEach(function (item, index) {
                      if (index === sliderTarget) {
                        item.parentNode.style.display = 'block';
                      } else {
                        item.parentNode.style.display = 'none';
                      }
                    });
                    sliderPagersList.forEach(function (pager, index) {
                      if (index === sliderTarget) {
                        pager.classList.add('active');
                      } else {
                        pager.classList.remove('active');
                      }
                    });
                  }

                  function checkImageHeight() {
                    var sliderImages = document.getElementsByClassName('slider__images-image');
                    var visibleSliderImage = Array.from(sliderImages).find(function(image) {
                        return window.getComputedStyle(image).display !== 'none';
                    });
                    if (visibleSliderImage) {
                        var sliderWidth = visibleSliderImage.offsetWidth;
                        Array.from(sliderImages).forEach(function(image) {
                          image.style.width = sliderWidth + 'px';
                        });
                    }
                  }

                  checkImageHeight()
                  var sliderImages = document.getElementsByClassName('slider__images-image');
                  Array.from(sliderImages).forEach(function(sliderImage) {
                    sliderImage.addEventListener('load', function() {
                        checkImageHeight();
                        Array.from(sliderImages).forEach(function(image) {
                            image.classList.add('loaded');
                        });
                    });
                  });

                  window.addEventListener('resize', function() {
                    checkImageHeight();
                  });
                </script>
              </div>
            </div>

            <div class="mod-dependence-list">
              <input newshoturl id="input-logo-url" style="width: 100%; border-radius: 0; border-top-left-radius: 5pt; border-top-right-radius: 5pt; background: #636363; color: white;" type="url" placeholder="–°—Å—ã–ª–∫–∞ –Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ...">
              <style>
                ::placeholder { /* Most modern browsers support this now. */
                  color: white;
                }
              </style>
              <div style="display: flex;">
                <select newshottype title="–í—ã–±–µ—Ä–µ—Ç–µ —Ç–∏–ø" style="width: 100%; margin: 0; border-radius: 0; border-bottom-left-radius: 5pt;">
                  <option value="screenshot">–°–∫—Ä–∏–Ω—à–æ—Ç</option>
                  <option value="logo" title="–ú–æ–∂–µ—Ç –±—ã—Ç—å —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω">–õ–æ–≥–æ—Ç–∏–ø</option>
                </select>
                <button onclick="addLogo()" style="border: none; border-bottom-right-radius: 5pt; padding: 3pt; background: #545454; color: aliceblue; cursor: pointer;">–î–æ–±–∞–≤–∏—Ç—å</button>
              </div>
            </div>

            <div class="mod-dependence-list">
              –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –º–æ–¥–∞
              {% for item in data[2].values() %}
                <a class="mod-dependence" href="/mod/{{ item.id }}">
                  <img src="{{ item.img }}" alt="–õ–æ–≥–æ—Ç–∏–ø –º–æ–¥–∞">
                  <h3 translate="no">{{ item.name }}</h3>
                </a>
              {% endfor %}
            </div>
          </div>
      </article>

    </div>

{% endblock %}

{% block title %}
{{ data[0]['result']['name'] }} - edit Open Work
{% endblock %}

{% block description %}
{{ data[0]['result']['short_description'] }}
{% endblock %}
